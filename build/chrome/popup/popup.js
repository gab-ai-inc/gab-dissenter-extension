var i={name:"Google Chrome",slug:"chrome",scriptVariableMap:{BROWSER:"chrome",MESSENGER:"extension"},manifestMap:{"background.persistent":!1,incognito:"not_allowed",offline_enabled:!1,version_name:"0.1.1",version:"0.1.1"},version:"0.1.1"},e="chrome",t="firefox",n="edge",o="safari",a="https://dissenter.com/discussion/begin-extension?url=",r=function(e){return!s(e)&&!u(e)&&(null!==e&&"object"==typeof e)},c=function(e){return"string"==typeof e||e instanceof String},u=function(e){return!c(e)&&!s(e)&&null!=e&&null!=e&&(e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e))},s=function(e){return Array.isArray(e)},l=function(){document.body,document.getElementById("popup");var r=document.getElementById("popup-iframe");function n(e,n){n,setTimeout(function(){var e=encodeURIComponent(n),t=a+e;r.setAttribute("src",t),r.classList.remove("hidden")},250)}this.init=function(){if(i.slug===o){var e=safari.application.activeBrowserWindow,t=(e.activeTab,function(e){e.target.title;var t=e.target.url||"";t&&n(0,t)});e.addEventListener("activate",function(e){e.target.hasOwnProperty("url")&&(t(e),e.target.addEventListener("navigate",function(e){e.target.hasOwnProperty("url")&&t(e)}))},!0)}else chrome.tabs.query({active:!0,currentWindow:!0},function(e){if(!e)return!1;var t=e[0]||{};chrome.tabs.executeScript({code:"try { document.querySelector('link[rel=\"canonical\"]').href; } catch(e) {}"},function(e){t.title;n(0,e[0]||t.url||"")})})}};document.addEventListener("DOMContentLoaded",function(){(new l).init()});