var i={name:"Microsoft Edge",slug:"edge",scriptVariableMap:{BROWSER:"browser",MESSENGER:"runtime"},manifestMap:{"background.persistent":!1,version:"0.1.1"},version:"0.1.1"},t="chrome",e="firefox",n="edge",o="safari",a="https://dissenter.com/discussion/begin-extension?url=",r=function(t){return!s(t)&&!u(t)&&(null!==t&&"object"==typeof t)},c=function(t){return"string"==typeof t||t instanceof String},u=function(t){return!c(t)&&!s(t)&&null!=t&&null!=t&&(t&&"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t))},s=function(t){return Array.isArray(t)},d=function(){document.body,document.getElementById("popup");var r=document.getElementById("popup-iframe");function n(t,n){n,setTimeout(function(){var t=encodeURIComponent(n),e=a+t;r.setAttribute("src",e),r.classList.remove("hidden")},250)}this.init=function(){if(i.slug===o){var t=safari.application.activeBrowserWindow,e=(t.activeTab,function(t){t.target.title;var e=t.target.url||"";e&&n(0,e)});t.addEventListener("activate",function(t){t.target.hasOwnProperty("url")&&(e(t),t.target.addEventListener("navigate",function(t){t.target.hasOwnProperty("url")&&e(t)}))},!0)}else browser.tabs.query({active:!0,currentWindow:!0},function(t){if(!t)return!1;var e=t[0]||{};browser.tabs.executeScript({code:"try { document.querySelector('link[rel=\"canonical\"]').href; } catch(e) {}"},function(t){e.title;n(0,t[0]||e.url||"")})})}};document.addEventListener("DOMContentLoaded",function(){(new d).init()});